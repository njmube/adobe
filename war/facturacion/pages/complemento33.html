<section class="jumbotron">
	<div class="container">
		<h2>Facturaci&oacute;n</h2>
		<p>{{nombreEmpresa}}</p>
		<submenu />
	</div>
</section>
<br>

<div class="container">
	<div class="row">
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">*Fecha
				y Hora de Expedici&oacute;n:</label>
			<div class="col-10">
				<input class="form-control facInp" type="date" value="" id="fecha"
					ng-model="cfdiParaPago.fecha">
			</div>
		</div>
		<div class="form-group ">
			<div class="col-md-3">
				<label for="example-text-input" class="col-2 col-form-label">Serie:
				</label>
				<div class="col-10">
					<select class="facInp" ng-model="serialElegido" id="serial"
						ng-options="r.serie for r in seriales"></select>
				</div>
			</div>
			<div class="col-md-3">
				<label for="example-text-input" class="col-2 col-form-label">Folio:</label>
				<div class="col-10">
					<input class="form-control facInp" type="number" value=""
						id="folio" name="folio" ng-model="serialElegido.folio" min="1"
						ng-disabled="serialElegido">
				</div>
			</div>
			<div class="col-md-3">
				<label for="example-text-input" class="col-2 col-form-label">*Tipo
					de Comprobante:</label>
				<div class="col-10">
					<input class="form-control facInp" type="text" value=""
						id="tipoComprobante" name="tipoComprobante" disabled
						ng-model="cfdiParaPago.tipoDeComprobante.valor">
				</div>
			</div>
			<div class="col-md-6">
				<label for="example-text-input" class="col-2 col-form-label">*R&eacute;gimen
					Fiscal</label>
				<div class="col-10">
					<select class="form-control facInp"
						ng-model="cfdiParaPago.emisor.regimenFiscal.valor">
						<option value="601" selected>601-General de Ley Personas
							Morales</option>
						<option value="603">603-Personas Morales con Fines no
							Lucrativos</option>
						<option value="605">605-Sueldos y Salarios e Ingresos
							Asimilados a Salarios</option>
						<option value="606">606-Arrendamiento</option>
						<option value="608">608-Dem&aacute;s ingresos</option>
						<option value="609">609-Consolidaci&oacute;n</option>
						<option value="610">610-Residentes en el Extranjero sin
							Establecimiento Permanente en M&eacute;xico</option>
						<option value="611">611-Ingresos por Dividendos (socios y
							accionistas)</option>
						<option value="612">612-Personas F&iacute;sicas con
							Actividades Empresariales y Profesionales</option>
						<option value="614">614-Ingresos por intereses</option>
						<option value="616">616-Sin obligaciones fiscales</option>
						<option value="620">620-Sociedades Cooperativas de
							Producci&oacute;n que optan por diferir sus ingresos</option>
						<option value="622">622-Actividades Agr&iacute;colas,
							Ganaderas,Silv&iacute;colas y Pesqueras</option>
						<option value="623">623-Opcional para Grupos de
							Sociedades</option>
						<option value="624">624-Coordinados</option>
						<option value="607">607-R&eacute;gimen de
							Enajenaci&oacute;n o Adquisici&oacute;n de Bienes</option>
						<option value="615">615-R&eacute;gimen de los ingresos
							por obtenci&oacute;n de premios</option>
					</select>
				</div>
			</div>
		</div>
	</div>
	<hr>
	<h4>Pago</h4>
	<div class="form-group row">
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Forma
				de Pago*: </label>
			<div class="col-10">
				<select class="form-control facInp"
					ng-model="complementoPagos.pago[0].formaDePagoP.valor">
					<option value="01">01-Efectivo</option>
					<option value="02">02-Cheque nominativo</option>
					<option value="03">03-Transferencia electr&oacute;nica de
						fondos</option>
					<option value="04">04-Tarjeta de Cr&eacute;dito</option>
					<option value="05">05-Monedero Electr&oacute;nico</option>
					<option value="06">06-Dinero electr&oacute;nico</option>
					<option value="08">08-Vales de despensa</option>
					<option value="28">28-Tarjeta de D&eacute;bito</option>
					<option value="29">29-Tarjeta de Servicio</option>
					<option value="99">99-Por definir</option>
				</select>
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">*Fecha
				de Pago:</label>
			<div class="col-10">
				<input class="form-control facInp" type="date" value="" id="fecha"
					ng-model="complementoPagos.pago[0].fechaPago">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Moneda*:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text" value="MXN"
					ng-model="complementoPagos.pago[0].monedaP.valor">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Tipo
				de Cambio:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text" id="monto"
					ng-model="complementoPagos.pago[0].tipoCambioP">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Monto*:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text" id="monto"
					ng-model="complementoPagos.pago[0].monto">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">N&uacute;mero
				de Operaci&oacute;n:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text" id="monto"
					ng-model="complementoPagos.pago[0].numOperacion">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Nombre
				Banco Ordenante:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text" id="monto"
					ng-model="complementoPagos.pago[0].nomBancoOrdExt">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Cta
				Beneficiario:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					ng-model="complementoPagos.pago[0].ctaBeneficiario">
			</div>
		</div>

		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">RFC
				Emisor Cuenta Beneficiario:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					ng-model="complementoPagos.pago[0].rfcEmisorCtaBen">
			</div>
		</div>

		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Cuenta
				Ordenante:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					ng-model="complementoPagos.pago[0].ctaOrdenante">
			</div>
		</div>

		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">RFC
				Emisor Cuenta Ordenante:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					ng-model="complementoPagos.pago[0].rfcEmisorCtaOrd">
			</div>
		</div>
	</div>
	<hr>
	<h4>Documentos Relacionados</h4>
	<div class="form-group row"
		ng-repeat="doctoRelacionado in complementoPagos.pago[0].doctoRelacionado">
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">UUID
				*:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text" value="MXN"
					id="{{doctoRelacionado.ideuuid}}"
					ng-model="doctoRelacionado.idDocumento">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Serie:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text" value="MXN"
					ng-model="doctoRelacionado.serie">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Folio
				:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text" value="MXN"
					ng-model="doctoRelacionado.folio">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Moneda
				:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					ng-model="doctoRelacionado.monedaDR.valor">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Tipo
				de Cambio :</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					ng-model="doctoRelacionado.tipoCambioDR">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Metodo
				de Pago *:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					ng-model="doctoRelacionado.metodoDePagoDR.valor" disabled>
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Saldo
				anterior*:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					id="{{doctoRelacionado.impSaldoAntid}}"
					ng-model="doctoRelacionado.impSaldoAnt">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Importe
				pagado*:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					id="{{doctoRelacionado.impPagadoid}}"
					ng-model="doctoRelacionado.impPagado">
			</div>
		</div>
		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Saldo
				insoluto*:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					id="{{doctoRelacionado.impSaldoInsolutoid}}"
					ng-model="doctoRelacionado.impSaldoInsoluto">
			</div>
		</div>

		<div class="col-md-3">
			<label for="example-text-input" class="col-2 col-form-label">Num
				Parcialidad*:</label>
			<div class="col-10">
				<input class="form-control facInp" type="text"
					id="{{doctoRelacionado.numParcialidadid}}"
					ng-model="doctoRelacionado.numParcialidad">
			</div>
		</div>
		<div class="col-md-3">
			<button class="btn btn-tikal btn-primary" ng-click="delDoc($index)"
				style="margin-top: 15px;">Eliminar documento</button>
		</div>
		<hr>
	</div>
	<div class="form-group row">
		<div class="col-md-3">
			<button class="btn btn-tikal btn-primary" ng-click="addDoc()">Agregar
				otro documento</button>
		</div>
	</div>
	<hr>
	<h4>Receptor</h4>
	<div class="form-group row">
		<form name="formCaptura">
			<div class="col-md-6">
				<label for="example-text-input" class="col-2 col-form-label">*RFC:</label>
				<div class="col-10">
					<select class="facInp" ng-model="cfdiParaPago.receptor"
						class="form-control" ng-options="r.rfc for r in receptores"
						ng-change="usoFDIhide()" id="rfcChange" required>
					</select>
					<!-- 						<input class="form-control facInp" type="text" value="" id="rfc" -->
					<!-- 							ng-model="comprobante.receptor.rfc" name="rfc"> -->
				</div>
			</div>
			<div class="col-md-6">
				<label for="example-text-input" class="col-2 col-form-label">Nombre
					o Raz&oacute;n Social</label>
				<div class="col-10">
					<select class="facInp" ng-model="cfdiParaPago.receptor"
						ng-options="r.nombre for r in receptores" class="form-control"
						ng-change="usoFDIhide()" required>

					</select>
					<!-- 						<input class="form-control facInp" type="text" value="" -->
					<!-- 							id="nombre" ng-model="comprobante.receptor.nombre" name="nombre"> -->
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group ">
					<label for="example-text-input" class="col-2 col-form-label">Uso
						de CFDI:</label>
					<div class="col-10">
						<!-- 							<input class="form-control facInp" type="text" value="" -->
						<!-- 								id="condPago" name="condPago" -->
						<!-- 								ng-model="comprobante.receptor.usoCFDI.valor"> -->
						<select class="form-control facInp"
							ng-model="cfdiParaPago.receptor.usoCFDI.valor"
							ng-change="usoFDIhide()" required>
							<option value="G01">G01-Adquisici&oacute;n de mercancias</option>
							<option value="G02">G02-Devoluciones, descuentos o
								bonificaciones</option>
							<option value="G03">G03-Gastos en general</option>
							<option value="I01">I01-Construcciones</option>
							<option value="I02">I02-Mobilario y equipo de oficina
								por inversiones</option>
							<option value="I03">I03-Equipo de transporte</option>
							<option value="I04">I04-Equipo de computo y accesorios</option>
							<option value="I05">I05-Dados, troqueles, moldes,
								matrices y herramental</option>
							<option value="I06">I06-Comunicaciones
								telef&oacute;nicas</option>
							<option value="I07">I07-Comunicaciones satelitales</option>
							<option value="I08">I08-Otra maquinaria y equipo</option>
							<option value="D01" class="nomoral">D01-Honorarios
								m&eacute;dicos, dentales y gastos hospitalarios.</option>
							<option value="D02" class="nomoral">D02-Gastos
								m&eacute;dicos por incapacidad o discapacidad</option>
							<option value="D03" class="nomoral">D03-Gastos
								funerales.</option>
							<option value="D04" class="nomoral">D04-Donativos.</option>
							<option value="D05" class="nomoral">D05-Intereses reales
								efectivamente pagados por cr&eacute;ditos hipotecarios (casa
								habitaci&oacute;n).</option>
							<option value="D06" class="nomoral">D06-Aportaciones
								voluntarias al SAR.</option>
							<option value="D07" class="nomoral">D07-Primas por
								seguros de gastos m&eacute;dicos.</option>
							<option value="D08" class="nomoral">D08-Gastos de
								transportaci&oacute;n escolar obligatoria.</option>
							<option value="D09" class="nomoral">D09-Dep&oacute;sitos
								en cuentas para el ahorro, primas que tengan como base planes de
								pensiones.</option>
							<option value="D10" class="nomoral">D10-Pagos por
								servicios educativos (colegiaturas)</option>
							<option value="P01">P01-Por definir</option>
						</select>
					</div>
				</div>
			</div>
	</div>
	<div class="row">
		<div class="col-md-3">
			<!-- 				<button class="btn btn-tikal btn-primary" data-toggle="modal" data-target="#myModal">Enviar</button> -->
			<button class="btn btn-tikal btn-primary"
				ng-click="enviarComprobante()">Enviar</button>

		</div>
	</div>

</div>

<!-- <div class="modal fade" id="myModal" role="dialog" tabindex='-1'> -->
<!-- 	<div class="modal-dialog"> -->
<!-- 		<div class="modal-content"> -->
<!-- 			<div class="modal-header"> -->
<!-- 				<button type="button" class="close" data-dismiss="modal">&times;</button> -->
<!-- 				<h4 class="modal-title">Selecciona un Email</h4> -->
<!-- 			</div> -->
<!-- 			<div class="modal-body"> -->
<!-- 				<form name="modalFactura"> -->
<!-- 					<div class="form-group"> -->
<!-- 						<label class="col-2 col-form-label" ng-hide="Correo">Email:</label> -->
<!-- 						<div class="col-10"> -->
<!-- 							<select ng-model="comprobante.email" class="form-control" -->
<!-- 								ng-hide="Correo" required> -->
<!-- 								<option></option> -->
<!-- 								<option ng-repeat="e in emails">{{e}}</option> -->

<!-- 							</select> <label class="col-2 col-form-label">Otro:</label> <input -->
<!-- 								type="checkbox" name="otro" id="otroCorreo" value="Otro" -->
<!-- 								ng-model="Correo"> <input class="form-control" -->
<!-- 								type="email" placeholder='example@email.com' value="" -->
<!-- 								ng-model="comprobante.email" ng-show="Correo" required> -->
<!-- 						</div> -->

<!-- 					</div> -->
<!-- 					<div class="modal-footer"> -->
<!-- 						<button ng-hide="terminado" type="submit" class="btn btn-default" -->
<!-- 							ng-click="enviarComprobante()" data-toggle="modal" -->
<!-- 							data-target="#mensaje" data-dismiss="modal" -->
<!-- 							ng-disabled='!modalFactura.$valid'>Enviar</button> -->
<!-- 						<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button> -->
<!-- 					</div> -->
<!-- 				</form> -->
<!-- 			</div> -->

<!-- 		</div> -->
<!-- 	</div> -->
<!-- </div> -->

<div class="modal fade" id="docModal" role="dialog" tabindex='-1'>
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Buscar Documento</h4>
			</div>
			<div class="modal-body">
				<form name="modalFactura">
					<div class="form-group">
						<div class="input-group">
							<input class="form-control" placeholder='UUID'
								ng-model="buscarUUID">
							<div class="input-group-btn">
								<button class="btn btn-default" type="submit"
									ng-click="buscarDoc()">
									<i class="glyphicon glyphicon-search"></i>
								</button>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button ng-hide="terminado" type="submit" class="btn btn-default"
							ng-click="enviarComprobante()" data-toggle="modal"
							data-target="#mensaje" data-dismiss="modal"
							ng-disabled='!modalFactura.$valid'>Enviar</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					</div>
				</form>
			</div>

		</div>
	</div>
</div>
<div class="modal fade" id="mensaje" role="dialog" tabindex='-1'>
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header"></div>
			<div class="modal-body">
				<div class="loader" ng-hide="terminado"></div>
				{{mensajeFac}}
				<div class="modal-footer" ng-show="finalizado">
					<button type="submit" class="btn btn-default"
						ng-click="nuevaFactura()" data-dismiss="modal">Nueva
						Factura</button>
					<button type="button" class="btn btn-default" data-dismiss="modal"
						ng-click="listaFacturas()">Lista de Facturas</button>
				</div>
			</div>

		</div>
	</div>
</div>

